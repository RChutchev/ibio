(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{30:function(t,s,a){"use strict";a.r(s);var e=a(3),r=a.n(e);function o(t,s,a,e,r,o,n){try{var i=t[o](n),c=i.value}catch(t){return void a(t)}i.done?s(c):Promise.resolve(c).then(e,r)}function n(t){return function(){var s=this,a=arguments;return new Promise((function(e,r){var n=t.apply(s,a);function i(t){o(n,e,r,i,c,"next",t)}function c(t){o(n,e,r,i,c,"throw",t)}i(void 0)}))}}var i={name:"Settings",data:function(){return{password:{current_password:"",password:"",password_confirmation:""},submitting_password:!1,enabling_two_factor:!1,verifying_two_factor:!1,verify_two_factor:"",disabling_two_factor:!1,disable_two_factor:"",deletingAccount:!1}},methods:{submitPassword:function(){var t=this;return n(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.submitting_password=!0,s.next=3,t.$inertia.post(route("settings.password"),t.password,{preserveScroll:!0});case 3:t.submitting_password=!1;case 4:case"end":return s.stop()}}),s)})))()},enableTwoFactor:function(){var t=this;return n(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.enabling_two_factor=!0,s.next=3,t.$inertia.post(route("settings.2fa.enable"),{},{preserveScroll:!0});case 3:t.$refs.verify2FAModal.show(),t.enabling_two_factor=!1;case 5:case"end":return s.stop()}}),s)})))()},verifyTwoFactor:function(){var t=this;return n(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.verifying_two_factor=!0,s.next=3,t.$inertia.post(route("settings.2fa.verify"),{code:t.verify_two_factor},{preserveScroll:!0});case 3:t.$page.props.flash.success&&t.$refs.verify2FAModal.hide(),t.verifying_two_factor=!1;case 5:case"end":return s.stop()}}),s)})))()},disableTwoFactor:function(){var t=this;return n(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t.disabling_two_factor=!0,s.next=3,t.$inertia.post(route("settings.2fa.disable"),{code:t.disable_two_factor},{preserveScroll:!0});case 3:t.$page.props.flash.success&&t.$refs.disable2FAModal.hide(),t.disabling_two_factor=!1;case 5:case"end":return s.stop()}}),s)})))()},deleteAccount:function(){var t=this;return n(r.a.mark((function s(){return r.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:t.deletingAccount=!0,t.$inertia.visit(route("settings"),{method:"delete",preserveState:!0,only:[]}).then((function(){window.location.href="/login"}));case 2:case"end":return s.stop()}}),s)})))()}}},c=a(1),l=Object(c.a)(i,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("dashboard",[a("v-title",{staticClass:"mb-5"},[t._v("Settings")]),t._v(" "),a("v-card",{staticClass:"mb-8"},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Password")]),t._v(" "),t.$page.props.user.password_not_set?t._e():a("v-input",{staticClass:"mb-3",attrs:{type:"password",label:"Current Password",name:"current_password",error:t.$page.props.errors.changePassword&&t.$page.props.errors.changePassword.current_password},model:{value:t.password.current_password,callback:function(s){t.$set(t.password,"current_password",s)},expression:"password.current_password"}}),t._v(" "),a("v-input",{staticClass:"mb-3",attrs:{type:"password",label:"New Password",name:"password",error:t.$page.props.errors.changePassword&&t.$page.props.errors.changePassword.password},model:{value:t.password.password,callback:function(s){t.$set(t.password,"password",s)},expression:"password.password"}}),t._v(" "),a("v-input",{attrs:{type:"password",label:"Confirm Password",name:"password_confirmation",error:t.$page.props.errors.changePassword&&t.$page.props.errors.changePassword.password_confirmation},model:{value:t.password.password_confirmation,callback:function(s){t.$set(t.password,"password_confirmation",s)},expression:"password.password_confirmation"}}),t._v(" "),a("v-button",{staticClass:"mt-5",attrs:{loading:t.submitting_password},on:{click:function(s){return t.submitPassword()}}},[t._v("Save")])],1),t._v(" "),a("v-card",{staticClass:"mb-8"},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Two factor authentication")]),t._v(" "),a("p",{staticClass:"mb-5"},[t._v("By enabling this, We'll ask you the 6 digits validation code (from your authenticator app) at any login attempts.")]),t._v(" "),a("v-alert",{staticClass:"mb-3",attrs:{errors:t.$page.props.errors.enable2FA}}),t._v(" "),t.$page.props.user.two_factor_enabled?a("v-button",{staticClass:"mt-5",attrs:{type:"secondary"},on:{click:function(s){return t.$refs.disable2FAModal.show()}}},[t._v("Disable")]):a("v-button",{staticClass:"mt-5",attrs:{loading:t.enabling_two_factor},on:{click:t.enableTwoFactor}},[t._v("Enable")])],1),t._v(" "),a("v-title",{staticClass:"mb-5"},[t._v("Danger zone")]),t._v(" "),a("v-card",{staticClass:"mb-5",attrs:{border:"border-red-200"}},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Delete account")]),t._v(" "),a("div",{staticClass:"flex items-center justify-between"},[a("p",{staticClass:"mr-3"},[t._v("Your account will be temporarily deactivated and will not be accessible publicly. You will be logged out in the process, and the page will be re-activated when you login again.")]),t._v(" "),a("v-button",{attrs:{type:"color",color:"red"},on:{click:function(s){return t.$refs.deleteAccountModal.show()}}},[t._v("Delete")])],1)],1),t._v(" "),a("v-modal",{ref:"verify2FAModal"},[a("div",{staticClass:"p-4"},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Verify")]),t._v(" "),a("div",{staticClass:"mt-2"},[a("v-alert",{staticClass:"mb-3",attrs:{errors:t.$page.props.errors.verify2FA}}),t._v(" "),a("p",{staticClass:"mb-4"},[t._v("Scan the below QR code with an authenticator app like\n                    "),a("a",{staticClass:"text-primary-500",attrs:{href:"#"}},[t._v("Google Authenticator")]),t._v("\n                    or\n                    "),a("a",{staticClass:"text-primary-500",attrs:{href:"#"}},[t._v("Authy")]),t._v("\n                    and enter the 6 digits code bellow to verify.\n                ")]),t._v(" "),a("p",{staticClass:"mb-4"},[t._v("Verification process will expire after 5 minutes.")]),t._v(" "),a("div",{staticClass:"mb-4 w-full text-center"},[a("div",{staticClass:"inline-block",domProps:{innerHTML:t._s(t.$page.props.data.qr)}})]),t._v(" "),a("v-input",{attrs:{name:"code",label:"6 digits code"},model:{value:t.verify_two_factor,callback:function(s){t.verify_two_factor=s},expression:"verify_two_factor"}})],1)],1),t._v(" "),a("div",{staticClass:"px-4 py-3 flex justify-end"},[a("v-button",{attrs:{type:"secondary"},on:{click:function(s){return t.$refs.verify2FAModal.hide()}}},[t._v("Cancel")]),t._v(" "),a("v-button",{staticClass:"ml-2",attrs:{type:"primary",loading:t.verifying_two_factor},on:{click:t.verifyTwoFactor}},[t._v("Verify")])],1)]),t._v(" "),a("v-modal",{ref:"disable2FAModal"},[a("div",{staticClass:"p-4"},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Disable")]),t._v(" "),a("div",{staticClass:"mt-2"},[a("v-alert",{staticClass:"mb-3",attrs:{errors:t.$page.props.errors.disable2FA}}),t._v(" "),a("p",{staticClass:"mb-4"},[t._v("Please enter the code from your authenticator app")]),t._v(" "),a("v-input",{attrs:{name:"code",label:"6 digits code"},model:{value:t.disable_two_factor,callback:function(s){t.disable_two_factor=s},expression:"disable_two_factor"}})],1)],1),t._v(" "),a("div",{staticClass:"px-4 py-3 flex justify-end"},[a("v-button",{attrs:{type:"secondary"},on:{click:function(s){return t.$refs.disable2FAModal.hide()}}},[t._v("Cancel")]),t._v(" "),a("v-button",{staticClass:"ml-2",attrs:{type:"primary",loading:t.disabling_two_factor},on:{click:t.disableTwoFactor}},[t._v("Disable")])],1)]),t._v(" "),a("v-modal",{ref:"deleteAccountModal"},[a("div",{staticClass:"p-4"},[a("v-title",{staticClass:"mb-5",attrs:{small:""}},[t._v("Delete account")]),t._v(" "),a("div",{staticClass:"mt-2"},[a("v-alert",{staticClass:"mb-3",attrs:{errors:t.$page.props.errors.deleteAccount}}),t._v(" "),a("p",{staticClass:"mb-4"},[t._v("All of your account data will be deleted completely and it is impossible to restore it.")])],1)],1),t._v(" "),a("div",{staticClass:"px-4 py-3 flex justify-end"},[a("v-button",{attrs:{type:"secondary"},on:{click:function(s){return t.$refs.deleteAccountModal.hide()}}},[t._v("Cancel")]),t._v(" "),a("v-button",{staticClass:"ml-2",attrs:{type:"color",color:"red",loading:t.deletingAccount},on:{click:t.deleteAccount}},[t._v("Delete")])],1)])],1)}),[],!1,null,null,null);s.default=l.exports}}]);